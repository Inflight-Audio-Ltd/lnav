{
    "$schema": "https://lnav.org/schemas/format-v1.schema.json",
    "postgres_log": {
        "title": "PostgreSQL",
        "description": "Format for PostgreSQL logs",
        "regex": {
            "std": {
                "pattern": "(?<timestamp>^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}(\\.\\d{3})? \\S+) \\[(?<pid>[\\d\\-]+)\\](?<host>\\s+\\[[^\\]]+\\])?(?:\\s+(?<user>[^@]+)@(?<db_name>\\S+))? (?<level>DEBUG\\d?|DETAIL|CONTEXT|INFO|NOTICE|WARNING|ERROR|LOG|FATAL|PANIC|STATEMENT):\\s+(?<body>.*)$"
            }
        },
        "value": {
            "level": {
                "kind": "string"
            },
            "pid": {
                "kind": "string",
                "identifier": true
            },
            "host": {
                "kind": "string",
                "identifier": true
            },
            "user": {
                "kind": "string",
                "identifier": true
            },
            "db_name": {
                "kind": "string",
                "identifier": true
            },
            "timestamp": {
                "kind": "string"
            }
        },
        "sample": [
            {
                "line": "2025-08-13 01:45:01.127 PDT [12347] LOG:  database system was shut down at 2025-08-13 01:44:58 PDT"
            },
            {
                "line": "2025-06-05 17:10:04 MSK [608647-3] [local] postgres@postgres WARNING: terminating connection because of crash of another server process"
            }
        ]
    }
}
